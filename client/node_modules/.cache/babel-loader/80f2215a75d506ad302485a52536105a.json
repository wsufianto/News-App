{"ast":null,"code":"import _regeneratorRuntime from\"/Users/wsufianto/Documents/JWD/Coding/Learn-React/react-todolist/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/wsufianto/Documents/JWD/Coding/Learn-React/react-todolist/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/wsufianto/Documents/JWD/Coding/Learn-React/react-todolist/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/wsufianto/Documents/JWD/Coding/Learn-React/react-todolist/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/wsufianto/Documents/JWD/Coding/Learn-React/react-todolist/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{useGoogleLogin}from'react-google-login';import{AuthContext}from'../../App';// import authentication context\nimport{useHistory,Link}from'react-router-dom';import Input from'../Input/Input';import{signin,signup}from'../../Helpers/AuthActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";require('dotenv').config();var Auth=function Auth(){var _useState=useState({firstName:'',lastName:'',email:'',password:'',cfmPassword:''}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),signedUp=_useState4[0],setSignedUp=_useState4[1];var _useContext=useContext(AuthContext),dispatch=_useContext.dispatch;var history=useHistory();var clientId=process.env.REACT_APP_CLIENT_ID;var clearForm=function clearForm(){setFormData(_objectSpread(_objectSpread({},formData),{},{firstName:'',lastName:'',email:'',password:'',cfmPassword:''}));};var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var toggleSignedUp=function toggleSignedUp(e){e.preventDefault();clearForm();setSignedUp(function(prevSignedUp){return!signedUp;});};var handleSubmit=function handleSubmit(e){e.preventDefault();if(signedUp){signup({dispatch:dispatch,payload:{formData:formData,history:history}});}else{signin({dispatch:dispatch,payload:{formData:formData,history:history}});}clearForm();};var onSuccess=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(googleData){var resultData,result,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return googleData;case 2:resultData=_context.sent;result={firstName:resultData.profileObj.givenName,lastName:resultData.profileObj.familyName,email:resultData.profileObj.email,_id:resultData.profileObj.googleId};token=resultData.tokenId;try{dispatch({type:'LOGIN',payload:{result:result,token:token}});history.push(\"/\");}catch(error){console.log(error);}case 6:case\"end\":return _context.stop();}}},_callee);}));return function onSuccess(_x){return _ref.apply(this,arguments);};}();var onFailure=function onFailure(){console.log(\"Google Sign In was unsuccessful. Try again later!\");};var _useGoogleLogin=useGoogleLogin({onSuccess:onSuccess,onFailure:onFailure,clientId:clientId}),signIn=_useGoogleLogin.signIn;return/*#__PURE__*/_jsx(\"div\",{className:\"w-full mx-auto mt-8 max-w-sm\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\",name:\"loginform\",onSubmit:handleSubmit,children:[signedUp?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Input,{label:\"First Name\",autoFocus:\"autoFocus\",name:\"firstName\",type:\"text\",placeholder:\"First Name\",value:formData.firstName,handleChange:handleChange,required:\"required\"}),/*#__PURE__*/_jsx(Input,{label:\"Last Name\",name:\"lastName\",type:\"text\",placeholder:\"Last Name\",value:formData.lastName,handleChange:handleChange}),/*#__PURE__*/_jsx(Input,{label:\"Email\",name:\"email\",type:\"email\",placeholder:\"Email Address\",value:formData.email,handleChange:handleChange,required:\"required\"}),/*#__PURE__*/_jsx(Input,{label:\"Password\",name:\"password\",type:\"password\",placeholder:\"**************\",value:formData.password,handleChange:handleChange,required:\"required\"}),/*#__PURE__*/_jsx(Input,{label:\"Confirm Password\",name:\"cfmPassword\",type:\"password\",placeholder:\"**************\",value:formData.cfmPassword,handleChange:handleChange,required:\"required\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Input,{label:\"Email\",autoFocus:\"autoFocus\",name:\"email\",type:\"email\",placeholder:\"Email Address\",value:formData.email,handleChange:handleChange,required:\"required\"}),/*#__PURE__*/_jsx(Input,{label:\"Password\",name:\"password\",type:\"password\",placeholder:\"**************\",value:formData.password,handleChange:handleChange,required:\"required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"w-1/3 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",type:\"submit\",children:signedUp?\"Sign Up\":\"Sign In\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/2 inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800\",children:/*#__PURE__*/_jsx(Link,{to:\"#\",children:!signedUp&&\"Forgot Password?\"})})]}),!signedUp&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between py-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",onClick:signIn,children:\"Login with Google\"})}),/*#__PURE__*/_jsxs(\"button\",{className:\"text-blue-500 font-bold py-3 text-xs focus:outline-none\",onClick:toggleSignedUp,children:[\" \",signedUp?\"Have account? Sign in here.\":\"No Account Yet? Sign up here.\"]})]})});};export default Auth;","map":{"version":3,"sources":["/Users/wsufianto/Documents/JWD/Coding/Learn-React/react-todolist/client/src/Components/Auth/Auth.js"],"names":["React","useState","useContext","useGoogleLogin","AuthContext","useHistory","Link","Input","signin","signup","require","config","Auth","firstName","lastName","email","password","cfmPassword","formData","setFormData","signedUp","setSignedUp","dispatch","history","clientId","process","env","REACT_APP_CLIENT_ID","clearForm","handleChange","e","target","name","value","toggleSignedUp","preventDefault","prevSignedUp","handleSubmit","payload","onSuccess","googleData","resultData","result","profileObj","givenName","familyName","_id","googleId","token","tokenId","type","push","error","console","log","onFailure","signIn"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react'\nimport { useGoogleLogin } from 'react-google-login'\nimport { AuthContext } from '../../App' // import authentication context\nimport { useHistory, Link } from 'react-router-dom'\nimport Input from '../Input/Input'\nimport { signin, signup } from '../../Helpers/AuthActions'\nrequire('dotenv').config()\n\nconst Auth = () => {\n  const [formData, setFormData] = useState({\n    firstName: '',\n    lastName: '',\n    email: '',\n    password: '',\n    cfmPassword: '',\n  })\n  const [signedUp, setSignedUp] = useState(false)\n  const { dispatch } = useContext(AuthContext)\n  const history = useHistory()\n  const clientId = process.env.REACT_APP_CLIENT_ID\n\n  const clearForm = () => {\n    setFormData({\n      ...formData,\n      firstName: '',\n      lastName: '',\n      email: '',\n      password: '',\n      cfmPassword: '',\n    })\n  }\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value })\n  }\n\n  const toggleSignedUp = (e) => {\n    e.preventDefault()\n    clearForm()\n    setSignedUp(prevSignedUp => !signedUp)\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n\n    if(signedUp) {\n      signup({\n        dispatch,\n        payload: {formData, history}\n      })\n    } else {\n      signin({\n        dispatch,\n        payload: {formData, history}\n      })\n    }\n    clearForm()\n  }\n\n  const onSuccess = async googleData => {\n    const resultData = await googleData\n\n    const result = { \n      firstName: resultData.profileObj.givenName,\n      lastName: resultData.profileObj.familyName,\n      email: resultData.profileObj.email,\n      _id: resultData.profileObj.googleId,\n    }\n\n    const token = resultData.tokenId\n\n    try {\n      dispatch({ type: 'LOGIN', payload: { result, token } })\n\n      history.push(`/`)\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  const onFailure = () => {\n    console.log(\"Google Sign In was unsuccessful. Try again later!\")\n  }\n\n  const { signIn } = useGoogleLogin({\n    onSuccess,\n    onFailure,\n    clientId,\n  })\n\n  return (\n    <div className=\"w-full mx-auto mt-8 max-w-sm\">\n      <form\n        className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\"\n        name=\"loginform\"\n        onSubmit={handleSubmit}\n      >\n        {signedUp ?\n          <>\n            <Input\n              label=\"First Name\"\n              autoFocus=\"autoFocus\"\n              name=\"firstName\"\n              type=\"text\"\n              placeholder=\"First Name\"\n              value={formData.firstName}\n              handleChange={handleChange}\n              required=\"required\"\n            />\n            <Input\n              label=\"Last Name\"\n              name=\"lastName\"\n              type=\"text\"\n              placeholder=\"Last Name\"\n              value={formData.lastName}\n              handleChange={handleChange}\n            />\n            <Input\n              label=\"Email\"\n              name=\"email\"\n              type=\"email\"\n              placeholder=\"Email Address\"\n              value={formData.email}\n              handleChange={handleChange}\n              required=\"required\"\n            />\n            <Input\n              label=\"Password\"\n              name=\"password\"\n              type=\"password\"\n              placeholder=\"**************\"\n              value={formData.password}\n              handleChange={handleChange}\n              required=\"required\"\n            />\n            <Input\n              label=\"Confirm Password\"\n              name=\"cfmPassword\"\n              type=\"password\"\n              placeholder=\"**************\"\n              value={formData.cfmPassword}\n              handleChange={handleChange}\n              required=\"required\"\n            />\n          </>\n          :\n          <>\n            <Input\n              label=\"Email\"\n              autoFocus=\"autoFocus\"\n              name=\"email\"\n              type=\"email\"\n              placeholder=\"Email Address\"\n              value={formData.email}\n              handleChange={handleChange}\n              required=\"required\"\n            />\n            <Input\n              label=\"Password\"\n              name=\"password\"\n              type=\"password\"\n              placeholder=\"**************\"\n              value={formData.password}\n              handleChange={handleChange}\n              required=\"required\"\n            />\n          </>\n        }\n        <div className=\"flex items-center justify-between\">\n          <button className=\"w-1/3 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\" type=\"submit\">\n            {signedUp ? `Sign Up` : `Sign In`}\n          </button>\n          <div className=\"w-1/2 inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800\">\n            <Link to=\"#\">\n              {!signedUp && `Forgot Password?`}\n            </Link>\n          </div>\n        </div>\n        {!signedUp && <div className=\"flex items-center justify-between py-2\">\n          <button\n            className=\"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n            onClick={signIn}\n          >\n            Login with Google\n          </button>\n        </div>\n        }\n        <button\n          className=\"text-blue-500 font-bold py-3 text-xs focus:outline-none\"\n          onClick={toggleSignedUp}> {signedUp ? `Have account? Sign in here.` : `No Account Yet? Sign up here.`}\n        </button>\n      </form>\n    </div>\n  )\n}\n\nexport default Auth\n"]},"metadata":{},"sourceType":"module"}