(this["webpackJsonpreact-client"]=this["webpackJsonpreact-client"]||[]).push([[0],{17:function(e,t){t.country={ae:"UAE",ar:"Argentina",at:"Austria",au:"Australia",be:"Belgium",bg:"Bulgaria",br:"Brazil",ca:"Canada",ch:"Switzerland",cn:"China",co:"Colombia",cu:"Cuba",cz:"Czech Republic",de:"Germany",eg:"Egypt",fr:"France",gb:"United Kingdom",gr:"Greece",hk:"Hong Kong",hu:"Hungary",id:"Indonesia",ie:"Ireland",il:"Israel",in:"India",it:"Italy",jp:"Japan",kr:"Korea",lt:"Lithuania",lv:"Latvia",ma:"Morocco",mx:"Mexico",my:"Malaysia",ng:"Nigeria",nl:"Netherlands",no:"Norway",nz:"New Zealand",ph:"Philippines",pl:"Poland",pt:"Portugal",ro:"Romania",rs:"Serbia",ru:"Russia",sa:"Saudi Arabia",se:"Sweden",sg:"Singapore",si:"Slovenia",sk:"Slovakia",th:"Thailand",tr:"Turkey",tw:"Taiwan",ua:"Ukraine",us:"USA",ve:"Venezuela",za:"South Africa"}},40:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(32),c=a.n(r),l=(a(40),a(2)),o=a(5),i=a(17),u=a(0),d=function(){return Object(u.jsxs)("div",{className:"container mx-auto my-10 text-3xl text-white text-center",children:[Object(u.jsx)("h1",{className:"text-2xl sm:text-3xl py-10",children:"Please select the country"}),Object(u.jsx)("div",{className:"grid justify-center items-center grid-flow-row grid-cols-2 grid-rows-16 md:grid-cols-5 md:grid-rows-10 xl:grid-cols-9 xl:grid-rows-6 gap-3 lg:gap-6 px-2 lg:px-0",children:Object.entries(i.country).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(u.jsx)(o.b,{to:"/news/".concat(a),children:Object(u.jsx)("div",{className:"border-2 p-2 rounded-xl hover:bg-blue-100 hover:text-blue-500 hover:border-blue-400 text-base",children:n})},a)}))})]})},b=a(3),m=a(34),j=function(){var e=s.a.useContext(z).dispatch,t=Object(n.useState)(JSON.parse(localStorage.getItem("user"))),a=Object(l.a)(t,2),r=a[0],c=a[1],i=Object(b.g)(),d=Object(b.h)(),j=function(){e({type:"LOGOUT"}),i.push("/"),c(null)};return Object(n.useEffect)((function(){var e=null===r||void 0===r?void 0:r.token;e&&(1e3*Object(m.a)(e).exp<(new Date).getTime()&&j());c(JSON.parse(localStorage.getItem("user")))}),[d]),Object(u.jsxs)("nav",{className:"flex bg-blue-600 h-auto items-center justify-between px-5 text-white md:py-2",children:[Object(u.jsx)("h1",{className:"text-base md:text-lg font-bold",children:" Latest International News "}),Object(u.jsxs)("div",{className:"flex flex-col items-end md:flex-row flex-wrap md:items-center md:justify-end md:space-x-3 text-sm md:text-lg",children:[Object(u.jsx)(o.b,{to:"/",className:"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100",children:" Home "}),(null===r||void 0===r?void 0:r.result)&&Object(u.jsxs)(o.b,{to:"/user/".concat(null===r||void 0===r?void 0:r.result._id),className:"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100",children:[" ",r.result.firstName," ",r.result.lastName,"'s News"]}),Object(u.jsx)(o.b,{to:"/contact",className:"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100",children:"Contact"}),(null===r||void 0===r?void 0:r.result)?Object(u.jsx)("button",{className:"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100",onClick:j,children:"Logout"}):Object(u.jsx)(o.b,{to:"/signin",className:"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100",children:"Sign In"})]})]})},x=function(e){var t=e.items,a=e.title,n=e.handleClick,s=e.isLoading,r=e.errMessage,c=e.label,l=e.style;return Object(u.jsxs)("div",{className:"w-11/12 mx-auto py-5",children:[Object(u.jsxs)("h1",{className:"text-2xl pb-5 text-blue-600",children:[" ",a," "]}),""!==r&&Object(u.jsxs)("div",{className:"text-red-500",children:[r," "]}),s&&Object(u.jsx)("div",{children:" Loading ... "}),t&&t.map((function(e){return Object(u.jsxs)("div",{className:"flex flex-auto flex-wrap justify-between h-auto items-center border-b-2",children:[Object(u.jsxs)("div",{className:"text-left w-full md:w-8/12 py-3",children:[Object(u.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline hover:text-blue-600",children:Object(u.jsx)("h2",{className:"text-lg text-blue-600",children:e.title})}),Object(u.jsxs)("p",{children:[e.description," ",Object(u.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"read"})]}),Object(u.jsxs)("p",{className:"text-xs py-2",children:["Published at ",new Date(e.publishedAt).toLocaleDateString()," - ",new Date(e.publishedAt).toLocaleTimeString()," "]})]}),Object(u.jsx)("div",{className:"w-full md:w-auto sm:visible-hidden",children:e.urlToImage&&Object(u.jsx)("img",{className:"w-full md:w-48 h-auto",src:e.urlToImage,alt:"x"})}),Object(u.jsx)("div",{className:"mx-auto py-2 md:w-4 md:mx-0",children:Object(u.jsx)("button",{onClick:function(){return n(e.title)},className:l,children:c})})]},e.title)}))]})},h=a(11),p=a.n(h),g=p.a.create({baseURL:"https://newsappmern.herokuapp.com/"});g.interceptors.request.use((function(e){return localStorage.getItem("user")&&(e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("user")).token)),e}));a(31).config();var f=function(){var e=Object(b.i)().region,t=Object.keys(i.country).includes(e),a=Object(u.jsx)("svg",{className:"w-6 h-6 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:Object(u.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),s=Object(n.useState)([]),r=Object(l.a)(s,2),c=r[0],o=r[1],d=Object(n.useState)(!0),m=Object(l.a)(d,2),j=m[0],h=m[1],f=Object(n.useState)(""),O=Object(l.a)(f,2),v=O[0],w=O[1];Object(n.useEffect)((function(){var t=p.a.CancelToken.source();return function(e,t){return g.get("/news/".concat(e),{cancelToken:t.token})}(e,t).then((function(e){o((function(t){return e.data})),h(!1),w("")})).catch((function(e){p.a.isCancel(e)?console.log("fetch cancelled!"):(h(!1),w(e.message))})),function(){t.cancel()}}),[e]);var N=Object(n.useState)(JSON.parse(localStorage.getItem("user"))),y=Object(l.a)(N,1)[0],S=Object(n.useState)(""),k=Object(l.a)(S,2),C=k[0],I=k[1];return t?Object(u.jsxs)("div",{className:"container bg-blue-100 rounded-lg max-w-7xl max-h-3/4 overflow-auto text-center mx-auto my-10 bg-gray-100",children:[Object(u.jsxs)("div",{className:"flex justify-center items-center",children:[Object(u.jsx)("h1",{className:"text-3xl py-3 px-3 text-blue-600",children:" Latest News "}),Object(u.jsx)("button",{className:"p-2 bg-blue-500 text-white rounded-lg border-2 shadow-md",onClick:function(){console.log("refreshing"),I((function(e){return""})),window.location.reload(!1)},children:"Refresh"})]}),Object(u.jsx)("div",{className:"text-red-600",children:""!==C&&Object(u.jsx)("p",{children:C})}),Object(u.jsx)(x,{items:c.articles,title:"".concat(i.country[e]," News"),handleClick:function(e){var t,a=c.articles.filter((function(t){return t.title===e})),n={userId:y.result._id,title:a[0].title,description:a[0].description,author:a[0].author||"",url:a[0].url,urlToImage:a[0].urlToImage,publishedAt:a[0].publishedAt,source:a[0].source.name};(t=n,g.post("/news/save",t)).then((function(e){409===e.data.code||200===e.data.code?I((function(t){return e.data.msg})):I((function(e){return"Unknown Error"}))}));var s=c.articles.filter((function(t){return t.title!==e}));o({articles:s})},isLoading:j,errMessage:v,label:a,style:(null===y||void 0===y?void 0:y.token)?"visible":"invisible"})]}):Object(u.jsx)(b.a,{to:"/*"})},O=function(){return Object(u.jsxs)("div",{className:"flex mx-auto flex-col max-w-3xl h-3/4 justify-center items-center my-8 text-white",children:[Object(u.jsx)("h2",{className:"text-3xl py-5 font-bold",children:" Page not found "}),Object(u.jsxs)("p",{className:"text-xl",children:[" Return to ",Object(u.jsxs)(o.b,{to:"/",children:[" ",Object(u.jsx)("span",{className:"underline hover:text-blue-600",children:"Home ..."})]})]})]})},v=function(){return Object(u.jsx)("div",{className:"text-xs text-white text-center py-8",children:"\xa92021. All rights reserved."})},w=function(){var e=Object(u.jsx)("svg",{className:"w-6 h-6 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:Object(u.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),t=Object(b.i)().userId,a=Object(n.useState)(JSON.parse(localStorage.getItem("user"))),s=Object(l.a)(a,1)[0],r=Object(n.useState)([]),c=Object(l.a)(r,2),o=c[0],i=c[1],d=Object(n.useState)(!0),m=Object(l.a)(d,2),j=m[0],h=m[1],f=Object(n.useState)(""),O=Object(l.a)(f,2),v=O[0],w=O[1];Object(n.useEffect)((function(){var e=p.a.CancelToken.source();return function(e,t){return g.get("/news/user/".concat(e),{cancelToken:t.token})}(t,e).then((function(e){i((function(t){return e.data})),h(!1),w("")})).catch((function(e){p.a.isCancel(e)?console.log("fetch cancelled!"):(h(!1),w(e.message))})),function(){e.cancel()}}),[t]);var N="".concat(s.result.firstName," ").concat(s.result.lastName);return Object(u.jsxs)("div",{className:"container bg-blue-100 rounded-lg max-w-7xl max-h-3/4 overflow-auto text-center mx-auto my-10 bg-gray-100",children:[Object(u.jsx)("div",{className:"flex justify-center items-center",children:Object(u.jsx)("h1",{className:"text-3xl py-3 px-3 text-blue-600",children:" Saved News "})}),t!==s.result._id?Object(u.jsx)(b.a,{to:"/*"}):0!==o.length||j?Object(u.jsx)(x,{items:o,title:"".concat(N,"'s News"),isLoading:j,errMessage:v,handleClick:function(e){var t,a=o.filter((function(t){return t.title===e}));t=a[0]._id,g.delete("/news/delete/".concat(t)),console.log("News Deleted!");var n=o.filter((function(t){return t.title!==e}));i(n)},label:e}):Object(u.jsx)("div",{className:"text-red-500 py-5",children:"No News Found"}),""!==v&&Object(u.jsxs)("div",{className:"text-red-500",children:[v," "]})]})},N=a(14),y=a(6),S=function(){var e=Object(n.useState)({name:"",email:"",message:"",status:"Submit"}),t=Object(l.a)(e,2),a=t[0],s=t[1],r=function(e){s(Object(y.a)(Object(y.a)({},a),{},Object(N.a)({},e.target.name,e.target.value)))};return Object(u.jsxs)("div",{className:"container items-center border-2 text-blue-600 font-bold mx-auto max-w-3xl px-3 sm:text-xl sm:px-20 py-10 mt-10 bg-gray-100 rounded-xl shadow-xl",children:[Object(u.jsx)("h1",{className:"text-2xl sm:text-3xl text-center pb-5",children:" Contact "}),Object(u.jsxs)("form",{id:"contactForm",onSubmit:function(e){e.preventDefault(),s(Object(y.a)(Object(y.a)({},a),{},{status:"Sending"})),p.a.post("https://newsappmern.herokuapp.com/contact",a).then((function(e){200===e.data.code?(alert("Message Sent"),s({name:"",email:"",message:"",status:"Submit"})):400===e.data.code&&(alert("Message Failed"),s(Object(y.a)(Object(y.a)({},a),{},{status:"Submit"})))}))},className:"flex flex-col",children:[Object(u.jsx)("label",{htmlFor:"name",className:"text-xl py-5",children:"Name: "}),Object(u.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"Enter your name",className:"text-md border-2 rounded-md p-2 max-w-sm",onChange:r,value:a.name,required:!0}),Object(u.jsx)("label",{htmlFor:"email",className:"text-xl py-5",children:"Email: "}),Object(u.jsx)("input",{type:"email",name:"email",id:"emailAdd",placeholder:"Enter your email address",className:"text-md border-2 rounded-md p-2 max-w-sm",onChange:r,value:a.email,required:!0}),Object(u.jsx)("label",{htmlFor:"message",className:"text-xl py-5",children:"Message: "}),Object(u.jsx)("textarea",{rows:"5",name:"message",className:"text-lg border-2 rounded-xl p-2",placeholder:"Message...",onChange:r,value:a.message}),Object(u.jsx)("button",{type:"submit",className:"p-2.5 border-2 bg-blue-600 text-white mt-10 w-28 rounded-lg hover:bg-blue-500",children:a.status})]})]})},k=a(12),C=a.n(k),I=a(15),L=a(35),A=function(e){var t=e.label,a=e.autoFocus,n=e.name,s=e.type,r=e.placeholder,c=e.value,l=e.handleChange,o=e.required;return Object(u.jsxs)("div",{className:"mb-4",children:[Object(u.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"firstname",children:t}),Object(u.jsx)("input",{autoFocus:a,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",name:n,type:s,placeholder:r,value:c,onChange:l,required:o})]})},F=function(){var e=Object(I.a)(C.a.mark((function e(t){var a,n,s,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.dispatch,n=t.payload,e.prev=1,e.next=4,c=n.formData,g.post("/users/signin",c);case 4:return s=e.sent,r=s.data,n.history.push("/"),e.abrupt("return",a({type:"LOGIN",payload:r}));case 10:e.prev=10,e.t0=e.catch(1),console.log("Something is wrong!"),alert(e.t0.message);case 14:case"end":return e.stop()}var c}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(I.a)(C.a.mark((function e(t){var a,n,s,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.dispatch,n=t.payload,e.prev=1,e.next=4,c=n.formData,g.post("/users/signup",c);case 4:return s=e.sent,r=s.data,n.history.push("/"),e.abrupt("return",a({type:"LOGIN",payload:r}));case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0.message);case 13:case"end":return e.stop()}var c}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();a(31).config();var T=function(){var e=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",cfmPassword:""}),t=Object(l.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(!1),c=Object(l.a)(r,2),i=c[0],d=c[1],m=Object(n.useContext)(z).dispatch,j=Object(b.g)(),x=function(){s(Object(y.a)(Object(y.a)({},a),{},{firstName:"",lastName:"",email:"",password:"",cfmPassword:""}))},h=function(e){s(Object(y.a)(Object(y.a)({},a),{},Object(N.a)({},e.target.name,e.target.value)))},p=function(){var e=Object(I.a)(C.a.mark((function e(t){var a,n,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:a=e.sent,n={firstName:a.profileObj.givenName,lastName:a.profileObj.familyName,email:a.profileObj.email,_id:a.profileObj.googleId},s=a.tokenId;try{m({type:"LOGIN",payload:{result:n,token:s}}),j.push("/")}catch(r){console.log(r)}case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(I.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Google Sign In was unsuccessful. Try again later!");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=Object(L.useGoogleLogin)({onSuccess:p,onFailure:g,clientId:"848343954603-annsi08nqq7ge47bj6e2jr5bjfjiptt6.apps.googleusercontent.com"}).signIn;return Object(u.jsx)("div",{className:"w-full mx-auto mt-8 max-w-sm",children:Object(u.jsxs)("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",name:"loginform",onSubmit:function(e){e.preventDefault(),i?q({dispatch:m,payload:{formData:a,history:j}}):F({dispatch:m,payload:{formData:a,history:j}}),x()},children:[i?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(A,{label:"First Name",autoFocus:"autoFocus",name:"firstName",type:"text",placeholder:"First Name",value:a.firstName,handleChange:h,required:"required"}),Object(u.jsx)(A,{label:"Last Name",name:"lastName",type:"text",placeholder:"Last Name",value:a.lastName,handleChange:h}),Object(u.jsx)(A,{label:"Email",name:"email",type:"email",placeholder:"Email Address",value:a.email,handleChange:h,required:"required"}),Object(u.jsx)(A,{label:"Password",name:"password",type:"password",placeholder:"**************",value:a.password,handleChange:h,required:"required"}),Object(u.jsx)(A,{label:"Confirm Password",name:"cfmPassword",type:"password",placeholder:"**************",value:a.cfmPassword,handleChange:h,required:"required"})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(A,{label:"Email",autoFocus:"autoFocus",name:"email",type:"email",placeholder:"Email Address",value:a.email,handleChange:h,required:"required"}),Object(u.jsx)(A,{label:"Password",name:"password",type:"password",placeholder:"**************",value:a.password,handleChange:h,required:"required"})]}),Object(u.jsxs)("div",{className:"flex items-center justify-between",children:[Object(u.jsx)("button",{className:"w-1/3 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:i?"Sign Up":"Sign In"}),Object(u.jsx)("div",{className:"w-1/2 inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800",children:Object(u.jsx)(o.b,{to:"#",children:!i&&"Forgot Password?"})})]}),!i&&Object(u.jsx)("div",{className:"flex items-center justify-between py-2",children:Object(u.jsx)("button",{className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:f,children:"Login with Google"})}),Object(u.jsxs)("button",{className:"text-blue-500 font-bold py-3 text-xs focus:outline-none",onClick:function(e){e.preventDefault(),x(),d((function(e){return!i}))},children:[" ",i?"Have account? Sign in here.":"No Account Yet? Sign up here."]})]})})},D="LOGIN",P="LOGOUT",E={isAuthenticated:!1,userData:null},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return localStorage.setItem("user",JSON.stringify(t.payload)),Object(y.a)(Object(y.a)({},e),{},{isAuthenticated:!0,userData:t.payload});case P:return localStorage.clear(),{isAuthenticated:!1,userData:null};default:return e}},z=s.a.createContext(null);var G=function(){var e=Object(n.useReducer)(M,E),t=Object(l.a)(e,2),a=t[0],s=t[1];return Object(u.jsx)(o.a,{children:Object(u.jsx)(z.Provider,{value:{state:a,dispatch:s},children:Object(u.jsxs)("div",{className:"container max-w-full h-screen overflow-auto bg-blue-600",children:[Object(u.jsx)(j,{}),Object(u.jsxs)(b.d,{children:[Object(u.jsx)(b.b,{exact:!0,path:"/",component:d}),Object(u.jsx)(b.b,{exact:!0,path:"/news/:region",component:f}),Object(u.jsx)(b.b,{exact:!0,path:"/user/:userId",component:w}),Object(u.jsx)(b.b,{exact:!0,path:"/contact",component:S}),Object(u.jsx)(b.b,{exact:!0,path:"/signin",component:T}),Object(u.jsx)(b.b,{path:"/*",component:O})]}),Object(u.jsx)(v,{})]})})})};c.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(G,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.a01104af.chunk.js.map