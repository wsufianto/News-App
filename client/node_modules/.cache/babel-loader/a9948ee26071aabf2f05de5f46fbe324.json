{"ast":null,"code":"var _jsxFileName = \"/Users/wsufianto/Documents/JWD/Coding/Learn-React/react-todolist/client/src/Components/Navbar/Navbar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { AuthContext } from '../../App'; // import authentication context\n\nimport decode from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Navbar = () => {\n  _s();\n\n  const {\n    dispatch\n  } = React.useContext(AuthContext); // useContext to get reducer dispatch function \n\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')));\n  const history = useHistory();\n  const location = useLocation();\n\n  const handleLogout = () => {\n    dispatch({\n      type: 'LOGOUT'\n    });\n    history.push(\"/\");\n    setUser(null);\n  };\n\n  useEffect(() => {\n    const token = user === null || user === void 0 ? void 0 : user.token;\n\n    if (token) {\n      const decodedToken = decode(token);\n      if (decodedToken.exp * 1000 < new Date().getTime()) handleLogout();\n    }\n\n    setUser(JSON.parse(localStorage.getItem('user')));\n  }, [location]);\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: \"flex bg-blue-600 h-16 items-center justify-between px-5 text-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-lg font-bold\",\n      children: \" Latest International News \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-x-3\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\",\n        children: \" Home \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), (user === null || user === void 0 ? void 0 : user.result) && /*#__PURE__*/_jsxDEV(Link, {\n        to: `/user/${user === null || user === void 0 ? void 0 : user.result._id}`,\n        className: \"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\",\n        children: [\" \", user.result.firstName, \" \", user.result.lastName, \"'s News\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/contact\",\n        children: \"Contact\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), (user === null || user === void 0 ? void 0 : user.result) ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\",\n        onClick: handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/signin\",\n        className: \"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\",\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Navbar, \"5EZQffE7QUg/fkOgi6q/63hh5CE=\", false, function () {\n  return [useHistory, useLocation];\n});\n\n_c = Navbar;\nexport default Navbar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Navbar\");","map":{"version":3,"sources":["/Users/wsufianto/Documents/JWD/Coding/Learn-React/react-todolist/client/src/Components/Navbar/Navbar.js"],"names":["React","useState","useEffect","Link","useHistory","useLocation","AuthContext","decode","Navbar","dispatch","useContext","user","setUser","JSON","parse","localStorage","getItem","history","location","handleLogout","type","push","token","decodedToken","exp","Date","getTime","result","_id","firstName","lastName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link, useHistory, useLocation } from 'react-router-dom'\nimport { AuthContext } from '../../App' // import authentication context\nimport decode from 'jwt-decode'\n\nconst Navbar = () => {\n  const { dispatch } = React.useContext(AuthContext); // useContext to get reducer dispatch function \n  \n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')))\n  \n  const history = useHistory()\n  const location = useLocation()\n\n  const handleLogout = () => {\n    dispatch({ type: 'LOGOUT' })\n    history.push(\"/\")\n    setUser(null)\n  }\n\n  useEffect(() => {\n    \n    const token = user?.token\n\n    if(token) {\n      const decodedToken = decode(token)\n      if (decodedToken.exp * 1000 < new Date().getTime()) handleLogout()\n    }\n\n    setUser(JSON.parse(localStorage.getItem('user')))\n  },[location])\n\n  return (\n    <nav className=\"flex bg-blue-600 h-16 items-center justify-between px-5 text-white\">\n      <h1 className=\"text-lg font-bold\"> Latest International News </h1>\n      <div className=\"space-x-3\">\n        <Link to=\"/\" className=\"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\"> Home </Link>\n        {user?.result &&\n          <Link to={`/user/${user?.result._id}`} className=\"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\"> {user.result.firstName} {user.result.lastName}'s News</Link>\n        }\n        <Link to=\"/contact\">Contact</Link>\n        {user?.result?\n          <button className=\"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\" onClick={handleLogout}>Logout</button>\n          :\n          <Link to=\"/signin\" className=\"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\">Sign In</Link>\n        }\n      </div>\n    </nav>\n  )\n}\n\nexport default Navbar\n"]},"metadata":{},"sourceType":"module"}