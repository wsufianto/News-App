{"ast":null,"code":"var _jsxFileName = \"/Users/wsufianto/Documents/JWD/Coding/Learn-React/react-todolist/client/src/Components/News/News.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport useFetch from '../../Helpers/useFetch';\nimport NewsList from '../NewsItem/NewsList';\nimport { useParams, Redirect } from 'react-router-dom';\nimport { country } from '../../Helpers/CountryCode';\nimport * as api from '../../api/index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nrequire('dotenv').config();\n\nconst News = () => {\n  _s();\n\n  let {\n    region\n  } = useParams();\n  const validRegion = Object.keys(country).includes(region); // const url = `https://newsapi.org/v2/top-headlines?country=${region}&apiKey=${process.env.REACT_APP_API_KEY}`\n\n  const buttonLabel = /*#__PURE__*/_jsxDEV(\"svg\", {\n    className: \"w-6 h-6 text-blue-400\",\n    fill: \"currentColor\",\n    viewBox: \"0 0 20 20\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      fillRule: \"evenodd\",\n      d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z\",\n      clipRule: \"evenodd\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 5\n  }, this); // const { data, setData, isLoading, errMessage } = useFetch(url)\n\n\n  const {\n    data\n  } = fetch(region);\n  console.log(data);\n  const [user] = useState(JSON.parse(localStorage.getItem('user')));\n  const [errText, setErrText] = useState('');\n\n  const handleSave = id => {\n    const selectedNews = data.articles.filter(item => item.title === id);\n    const saveNews = {\n      userId: user.result._id,\n      title: selectedNews[0].title,\n      description: selectedNews[0].description,\n      author: selectedNews[0].author || '',\n      url: selectedNews[0].url,\n      urlToImage: selectedNews[0].urlToImage,\n      publishedAt: selectedNews[0].publishedAt,\n      source: selectedNews[0].source.name\n    };\n    api.addNews(saveNews).then(response => {\n      console.log(response.data);\n\n      if (response.data.code === 409) {\n        setErrText(prevStatus => response.data.msg);\n      } else if (response.data.code === 200) {\n        setErrText(prevStatus => response.data.msg);\n      } else {\n        setErrText(prevStatus => \"Unknown Error\");\n      }\n    });\n    const articles = data.articles.filter(item => item.title !== id); // setData({articles})\n  };\n\n  const handleRefresh = () => {\n    console.log(\"refreshing\");\n    setErrText(prevText => '');\n    window.location.reload(false);\n  };\n\n  if (!validRegion) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/*\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container bg-blue-100 rounded-lg max-w-7xl max-h-3/4 overflow-auto text-center mx-auto my-10 bg-gray-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl py-3 px-3 text-blue-600\",\n        children: \" Latest News \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"p-2 bg-blue-500 text-white rounded-lg border-2 shadow-md\",\n        onClick: handleRefresh,\n        children: \"Refresh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-red-600\",\n      children: errText !== '' && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: errText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 29\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NewsList, {\n      items: data.articles,\n      title: `${country[region]} News`,\n      handleClick: handleSave,\n      isLoading: isLoading,\n      errMessage: errMessage,\n      label: buttonLabel,\n      style: !(user === null || user === void 0 ? void 0 : user.token) ? \"invisible\" : \"visible\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n\n_s(News, \"huBQnJ5l1Fy9XpQVsszl97jQUMk=\", false, function () {\n  return [useParams];\n});\n\n_c = News;\nexport default News;\n\nvar _c;\n\n$RefreshReg$(_c, \"News\");","map":{"version":3,"sources":["/Users/wsufianto/Documents/JWD/Coding/Learn-React/react-todolist/client/src/Components/News/News.js"],"names":["React","useState","useFetch","NewsList","useParams","Redirect","country","api","require","config","News","region","validRegion","Object","keys","includes","buttonLabel","data","fetch","console","log","user","JSON","parse","localStorage","getItem","errText","setErrText","handleSave","id","selectedNews","articles","filter","item","title","saveNews","userId","result","_id","description","author","url","urlToImage","publishedAt","source","name","addNews","then","response","code","prevStatus","msg","handleRefresh","prevText","window","location","reload","isLoading","errMessage","token"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport useFetch from '../../Helpers/useFetch';\nimport NewsList from '../NewsItem/NewsList'\nimport { useParams, Redirect } from 'react-router-dom'\nimport { country } from '../../Helpers/CountryCode'\nimport * as api from '../../api/index'\n\nrequire('dotenv').config();\n\nconst News = () => {\n\n  let { region } = useParams()\n\n  const validRegion = Object.keys(country).includes(region)\n\n  // const url = `https://newsapi.org/v2/top-headlines?country=${region}&apiKey=${process.env.REACT_APP_API_KEY}`\n\n  const buttonLabel = (\n    <svg\n      className=\"w-6 h-6 text-blue-400\"\n      fill=\"currentColor\"\n      viewBox=\"0 0 20 20\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n    <path\n      fillRule=\"evenodd\"\n      d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z\"\n      clipRule=\"evenodd\"\n    />\n    </svg>\n  )\n\n  // const { data, setData, isLoading, errMessage } = useFetch(url)\n  const { data } = fetch(region)\n  console.log(data)\n  const [user] = useState(JSON.parse(localStorage.getItem('user')))\n  const [errText, setErrText] = useState('')\n\n  const handleSave = (id) => {\n    const selectedNews = data.articles.filter(item => item.title === id)\n    \n    const saveNews = {\n      userId: user.result._id,\n      title: selectedNews[0].title,\n      description: selectedNews[0].description, \n      author: selectedNews[0].author || '',\n      url: selectedNews[0].url, \n      urlToImage: selectedNews[0].urlToImage, \n      publishedAt: selectedNews[0].publishedAt, \n      source: selectedNews[0].source.name\n    }\n    \n    api.addNews(saveNews)\n      .then(response => {\n        console.log(response.data)\n        if(response.data.code === 409) {\n          setErrText(prevStatus => response.data.msg)\n        } else if(response.data.code === 200) {\n          setErrText(prevStatus => response.data.msg)\n        } else {\n          setErrText(prevStatus => \"Unknown Error\")\n        }\n      }) \n\n    const articles = data.articles.filter(item => item.title !== id)\n    // setData({articles})\n  }\n\n  const handleRefresh = () => {\n    console.log(\"refreshing\")\n    setErrText(prevText => '')\n    window.location.reload(false)\n  }\n\n  if (!validRegion) {\n    return <Redirect to=\"/*\" />\n  }  \n\n  return (\n    <div className=\"container bg-blue-100 rounded-lg max-w-7xl max-h-3/4 overflow-auto text-center mx-auto my-10 bg-gray-100\">\n      <div className=\"flex justify-center items-center\">\n        <h1 className=\"text-3xl py-3 px-3 text-blue-600\"> Latest News </h1> \n        <button className=\"p-2 bg-blue-500 text-white rounded-lg border-2 shadow-md\" onClick={handleRefresh}>Refresh</button>\n      </div>\n      <div className=\"text-red-600\">\n        { errText !== '' && <p>{errText}</p>}\n      </div>\n      <NewsList items={data.articles} title={`${country[region]} News`} handleClick={handleSave} isLoading={isLoading} errMessage={errMessage} label={buttonLabel} style={!user?.token ? \"invisible\" : \"visible\"} />\n    </div>\n    \n  )\n}\n\nexport default News"]},"metadata":{},"sourceType":"module"}