{"ast":null,"code":"import _slicedToArray from\"/Users/wsufianto/Documents/JWD/Coding/Learn-React/react-todolist/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useHistory,useLocation}from'react-router-dom';import{AuthContext}from'../../App';// import authentication context\nimport decode from'jwt-decode';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Navbar=function Navbar(){var _React$useContext=React.useContext(AuthContext),dispatch=_React$useContext.dispatch;// useContext to get reducer dispatch function \nvar _useState=useState(JSON.parse(localStorage.getItem('user'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var history=useHistory();var location=useLocation();var handleLogout=function handleLogout(){dispatch({type:'LOGOUT'});history.push(\"/\");setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())handleLogout();}setUser(JSON.parse(localStorage.getItem('user')));},[location]);return/*#__PURE__*/_jsxs(\"nav\",{className:\"flex bg-blue-600 h-16 items-center justify-between px-5 text-white\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-bold\",children:\" Latest International News \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-x-3\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\",children:\" Home \"}),(user===null||user===void 0?void 0:user.result)&&/*#__PURE__*/_jsxs(Link,{to:\"/user/\".concat(user===null||user===void 0?void 0:user.result._id),className:\"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\",children:[\" \",user.result.firstName,\" \",user.result.lastName,\"'s News\"]}),/*#__PURE__*/_jsx(Link,{to:\"/contact\",children:\"Contact\"}),(user===null||user===void 0?void 0:user.result)?/*#__PURE__*/_jsx(\"button\",{className:\"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\",onClick:handleLogout,children:\"Logout\"}):/*#__PURE__*/_jsx(Link,{to:\"/signin\",className:\"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\",children:\"Sign In\"})]})]});};export default Navbar;","map":{"version":3,"sources":["/Users/wsufianto/Documents/JWD/Coding/Learn-React/react-todolist/client/src/Components/Navbar/Navbar.js"],"names":["React","useState","useEffect","Link","useHistory","useLocation","AuthContext","decode","Navbar","useContext","dispatch","JSON","parse","localStorage","getItem","user","setUser","history","location","handleLogout","type","push","token","decodedToken","exp","Date","getTime","result","_id","firstName","lastName"],"mappings":"8LAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,IAAT,CAAeC,UAAf,CAA2BC,WAA3B,KAA8C,kBAA9C,CACA,OAASC,WAAT,KAA4B,WAA5B,CAAwC;AACxC,MAAOC,CAAAA,MAAP,KAAmB,YAAnB,C,wFAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnB,sBAAqBR,KAAK,CAACS,UAAN,CAAiBH,WAAjB,CAArB,CAAQI,QAAR,mBAAQA,QAAR,CAAoD;AAEpD,cAAwBT,QAAQ,CAACU,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAD,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eAEA,GAAMC,CAAAA,OAAO,CAAGb,UAAU,EAA1B,CACA,GAAMc,CAAAA,QAAQ,CAAGb,WAAW,EAA5B,CAEA,GAAMc,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBT,QAAQ,CAAC,CAAEU,IAAI,CAAE,QAAR,CAAD,CAAR,CACAH,OAAO,CAACI,IAAR,CAAa,GAAb,EACAL,OAAO,CAAC,IAAD,CAAP,CACD,CAJD,CAMAd,SAAS,CAAC,UAAM,CAEd,GAAMoB,CAAAA,KAAK,CAAGP,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAEO,KAApB,CAEA,GAAGA,KAAH,CAAU,CACR,GAAMC,CAAAA,YAAY,CAAGhB,MAAM,CAACe,KAAD,CAA3B,CACA,GAAIC,YAAY,CAACC,GAAb,CAAmB,IAAnB,CAA0B,GAAIC,CAAAA,IAAJ,GAAWC,OAAX,EAA9B,CAAoDP,YAAY,GACjE,CAEDH,OAAO,CAACL,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAD,CAAP,CACD,CAVQ,CAUP,CAACI,QAAD,CAVO,CAAT,CAYA,mBACE,aAAK,SAAS,CAAC,oEAAf,wBACE,WAAI,SAAS,CAAC,mBAAd,yCADF,cAEE,aAAK,SAAS,CAAC,WAAf,wBACE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,SAAS,CAAC,sDAAvB,oBADF,CAEG,CAAAH,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEY,MAAN,gBACC,MAAC,IAAD,EAAM,EAAE,iBAAWZ,IAAX,SAAWA,IAAX,iBAAWA,IAAI,CAAEY,MAAN,CAAaC,GAAxB,CAAR,CAAuC,SAAS,CAAC,sDAAjD,eAA0Gb,IAAI,CAACY,MAAL,CAAYE,SAAtH,KAAkId,IAAI,CAACY,MAAL,CAAYG,QAA9I,aAHJ,cAKE,KAAC,IAAD,EAAM,EAAE,CAAC,UAAT,qBALF,CAMG,CAAAf,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEY,MAAN,eACC,eAAQ,SAAS,CAAC,sDAAlB,CAAyE,OAAO,CAAER,YAAlF,oBADD,cAGC,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,CAAmB,SAAS,CAAC,sDAA7B,qBATJ,GAFF,GADF,CAiBD,CA3CD,CA6CA,cAAeX,CAAAA,MAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link, useHistory, useLocation } from 'react-router-dom'\nimport { AuthContext } from '../../App' // import authentication context\nimport decode from 'jwt-decode'\n\nconst Navbar = () => {\n  const { dispatch } = React.useContext(AuthContext); // useContext to get reducer dispatch function \n  \n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')))\n  \n  const history = useHistory()\n  const location = useLocation()\n\n  const handleLogout = () => {\n    dispatch({ type: 'LOGOUT' })\n    history.push(\"/\")\n    setUser(null)\n  }\n\n  useEffect(() => {\n    \n    const token = user?.token\n\n    if(token) {\n      const decodedToken = decode(token)\n      if (decodedToken.exp * 1000 < new Date().getTime()) handleLogout()\n    }\n\n    setUser(JSON.parse(localStorage.getItem('user')))\n  },[location])\n\n  return (\n    <nav className=\"flex bg-blue-600 h-16 items-center justify-between px-5 text-white\">\n      <h1 className=\"text-lg font-bold\"> Latest International News </h1>\n      <div className=\"space-x-3\">\n        <Link to=\"/\" className=\"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\"> Home </Link>\n        {user?.result &&\n          <Link to={`/user/${user?.result._id}`} className=\"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\"> {user.result.firstName} {user.result.lastName}'s News</Link>\n        }\n        <Link to=\"/contact\">Contact</Link>\n        {user?.result?\n          <button className=\"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\" onClick={handleLogout}>Logout</button>\n          :\n          <Link to=\"/signin\" className=\"p-2 rounded-xl hover:text-blue-600 hover:bg-blue-100\">Sign In</Link>\n        }\n      </div>\n    </nav>\n  )\n}\n\nexport default Navbar\n"]},"metadata":{},"sourceType":"module"}